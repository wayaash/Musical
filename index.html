<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>YS ‚Ä¢ Music-Centric Builds ‚Äî WS Rewards</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  :root{
    --ink:#e8fff6;
    --muted:#bfeee1;
    --bgA:#0c1020;
    --bgB:#12223d;
    --a1:#00ffa9;
    --a2:#00c2ff;
    --glass: rgba(255,255,255,0.06);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--ink);
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:
      radial-gradient(900px 400px at 10% 8%, rgba(0,255,200,.08), transparent 35%),
      radial-gradient(900px 500px at 90% 92%, rgba(0,200,255,.07), transparent 40%),
      linear-gradient(180deg,var(--bgA),var(--bgB));
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }
  .wrap{max-width:1200px;margin:0 auto;padding:28px}
  header{
    display:flex;gap:18px;align-items:center;justify-content:space-between;
    background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.015));
    border:1px solid rgba(255,255,255,.06); border-radius:14px; padding:18px 20px;
    box-shadow:0 10px 40px rgba(0,0,0,.45);
  }
  .brand{display:flex;gap:14px;align-items:center}
  .logo{
    width:44px;height:44px;border-radius:12px;
    background:conic-gradient(from 180deg,var(--a1),var(--a2),#7cf3ff,var(--a1));
    position:relative; box-shadow:0 10px 20px rgba(0,200,220,.25) inset, 0 8px 28px rgba(0,0,0,.45);
  }
  .logo:after{
    content:"‚ô™"; position:absolute; inset:0; display:grid; place-items:center;
    color:#041013; font-weight:900; font-size:22px; filter:drop-shadow(0 2px 6px rgba(0,0,0,.6));
  }
  h1{margin:0;font-size:1.7rem;letter-spacing:.4px}
  .sub{margin:4px 0 0;color:var(--muted);font-size:.95rem}
  .cta{
    border:none; border-radius:999px; padding:10px 16px; cursor:pointer;
    font-weight:800; color:#041013;
    background:linear-gradient(90deg,var(--a1),var(--a2));
    box-shadow:0 14px 40px rgba(0,220,200,.18);
  }

  /* layout */
  .grid{display:grid;gap:18px;margin-top:22px;grid-template-columns:1.35fr .95fr}
  @media (max-width:1020px){ .grid{grid-template-columns:1fr} }

  .card{
    border-radius:14px; padding:18px;
    background:linear-gradient(180deg,rgba(255,255,255,.028),rgba(255,255,255,.015));
    border:1px solid rgba(255,255,255,.05);
    box-shadow:0 10px 36px rgba(0,0,0,.5);
  }
  .section-title{margin:0 0 10px;font-size:1.2rem}

  /* Visualizer */
  #visualizer{
    height:150px; display:flex; gap:5px; align-items:flex-end; padding:10px;
    background:linear-gradient(180deg,rgba(0,0,0,.18),rgba(255,255,255,.02));
    border-radius:12px; overflow:hidden; margin-bottom:10px;
  }
  .bar{flex:1; height:8px; border-radius:8px;
    background:linear-gradient(180deg,var(--a1),var(--a2));
    transition:height 90ms linear, background 120ms linear;
    box-shadow:0 6px 20px rgba(0,0,0,.38) inset;
  }

  /* Soundboard */
  .tools{display:flex;gap:10px;align-items:center;justify-content:space-between;margin-bottom:10px}
  .ghost{padding:8px 12px;border-radius:10px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.06);cursor:pointer}
  .grid-pads{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}
  .pad{
    border:1px solid rgba(255,255,255,.06); border-radius:12px; padding:14px;
    background:var(--glass); display:flex; flex-direction:column; align-items:center; gap:6px;
    user-select:none; cursor:pointer; transition:transform .15s, box-shadow .15s, background .15s;
  }
  .pad:hover{transform:translateY(-6px);background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));box-shadow:0 16px 36px rgba(0,0,0,.55)}
  .pad .lab{font-weight:700;background:linear-gradient(90deg,var(--a1),var(--a2));-webkit-background-clip:text;background-clip:text;color:transparent}
  .pad .key{font-size:.85rem;color:var(--muted)}

  /* FAQ */
  .faq li{
    list-style:none;margin:10px 0;padding:10px 12px;border-radius:10px;
    background:rgba(0,0,0,.25); border-left:4px solid var(--a1); font-weight:600;
  }

  /* Rewards */
  .rewards{display:grid;gap:10px}
  .reward{
    display:flex;justify-content:space-between;align-items:center;gap:10px;
    padding:12px;border-radius:12px;
    background:linear-gradient(90deg,rgba(255,255,255,.028),rgba(255,255,255,.015));
    border:1px solid rgba(255,255,255,.05);
  }
  .reward strong{color:var(--a1)}
  .submit-row{display:flex;gap:12px;justify-content:center;margin-top:12px}

  footer{margin:26px auto 18px;max-width:1200px;text-align:center;color:var(--muted);font-size:.9rem}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>YS ‚Äî Any Music-Centric Project ‚Ä¢ WS Rewards</h1>
          <div class="sub">Build something around music. Code, create, and earn gear along the way.</div>
        </div>
      </div>
      <button class="cta" onclick="scrollToSubmit()">Submit Project</button>
    </header>

    <div class="grid">
      <!-- LEFT: Visualizer + Soundboard -->
      <section class="card">
        <h2 class="section-title">Live Visualizer & Soundboard</h2>
        <div id="visualizer" aria-hidden="true"></div>

        <div class="tools">
          <div style="font-weight:800">Soundboard</div>
          <div style="display:flex;gap:8px">
            <button id="bgToggle" class="ghost" title="Toggle background loop">Play background</button>
            <button id="stopAll" class="ghost" title="Stop all sounds">Stop</button>
          </div>
        </div>

        <div id="board" class="grid-pads" aria-label="soundboard pads"></div>

        <p style="margin:12px 0 0;color:var(--muted)">Tip: Use keys <b>Q W E R</b> and <b>A S D F</b> too.</p>
      </section>

      <!-- RIGHT: FAQ + Rewards + Submit -->
      <aside class="card">
        <h2 class="section-title">‚ùì FNQ ‚Ä¢ Rules</h2>
        <ul class="faq" style="margin:0;padding:0">
          <li>üö´ No AI Allowed</li>
          <li>üë∂ You must be 18 years or lesser</li>
          <li>üéµ Project/website must include some music element</li>
          <li>‚è± MUST TRACK YOUR TIME WITH HACKATIME</li>
        </ul>

        <div style="height:14px"></div>
        <h2 class="section-title">üèÜ WS ‚Äî Rewards (New)</h2>
        <div class="rewards">
          <div class="reward"><span><b>1 hr</b></span> <strong>Stickers!!</strong></div>
          <div class="reward"><span><b>5 hr</b></span> <strong>A Music Album Of Your Choice!!</strong></div>
          <div class="reward"><span><b>10 hr</b></span> <strong>$50 Microphone</strong></div>
          <div class="reward"><span><b>20 hr</b></span> <strong>$100 Headphones (better cans!)</strong></div>
          <div class="reward"><span><b>30 hr</b></span> <strong>$150 Speaker / Soundbox</strong></div>
          <div class="reward"><span><b>40 hr</b></span> <strong>Basic Instrument (up to $200)</strong></div>
          <div class="reward"><span><b>50 hr</b></span> <strong>Better Instrument (max $250)</strong></div>
        </div>

        <div id="submit" class="submit-row">
          <a id="submitBtn" class="cta" href="#" target="_blank" rel="noreferrer">Submit via Fillout</a>
        </div>
      </aside>
    </div>

    <footer>
      YSWS #musical on slack. made with pyaar. yash.
    </footer>
  </div>

<script>
/* =================== AUDIO CORE =================== */
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
const masterGain = audioCtx.createGain(); masterGain.gain.value = 0.9;
const analyser = audioCtx.createAnalyser(); analyser.fftSize = 256; analyser.smoothingTimeConstant = 0.82;

analyser.connect(masterGain); masterGain.connect(audioCtx.destination);

// Unlock audio on first interaction
function unlock(){ if(audioCtx.state==='suspended') audioCtx.resume(); document.removeEventListener('pointerdown', unlock); }
document.addEventListener('pointerdown', unlock);

/* =================== VISUALIZER =================== */
const vis = document.getElementById('visualizer');
const BAR_COUNT = 48;
const bars = [];
for (let i=0;i<BAR_COUNT;i++){
  const b = document.createElement('div'); b.className='bar'; bars.push(b); vis.appendChild(b);
}
const freq = new Uint8Array(analyser.frequencyBinCount);
(function draw(){
  requestAnimationFrame(draw);
  analyser.getByteFrequencyData(freq);
  for (let i=0;i<BAR_COUNT;i++){
    const v = freq[i] || 0;
    const h = Math.max(6,(v/255)*140);
    const hue = Math.round(130 + (v/255)*60); // green -> teal
    bars[i].style.height = h+'px';
    bars[i].style.background = `linear-gradient(180deg,hsl(${hue},90%,65%), hsl(${hue+20},85%,45%))`;
  }
})();

/* =================== SOUNDBOARD =================== */
const pads = [
  { id:'kick',  label:'Kick',   key:'Q', url:'https://cdn.pixabay.com/download/audio/2021/10/15/audio_b2e2b9c7d6.mp3?filename=drum-bass-1-4669.mp3' },
  { id:'snare', label:'Snare',  key:'W', url:'https://cdn.pixabay.com/download/audio/2021/10/23/audio_27a5f5ee4f.mp3?filename=snare-1-4641.mp3' },
  { id:'hihat', label:'Hi-Hat', key:'E', url:'https://cdn.pixabay.com/download/audio/2021/10/15/audio_6a0a0c3e8a.mp3?filename=hi-hat-1-4673.mp3' },
  { id:'clap',  label:'Clap',   key:'R', url:'https://cdn.pixabay.com/download/audio/2021/10/15/audio_f1b4e4a7cb.mp3?filename=handclap-2-4688.mp3' },
  { id:'bell',  label:'Bell',   key:'A', url:'https://cdn.pixabay.com/download/audio/2022/03/15/audio_3a4b2a1f44.mp3?filename=bell-tone-6003.mp3' },
  { id:'bass',  label:'Bass',   key:'S', url:'https://cdn.pixabay.com/download/audio/2022/03/01/audio_3e5a1c2d4b.mp3?filename=bass-hit-6001_128.mp3' },
  { id:'chord', label:'Chord',  key:'D', url:'https://cdn.pixabay.com/download/audio/2022/03/15/audio_7a6a2b5a8a.mp3?filename=chord-2-6010.mp3' },
  { id:'lead',  label:'Lead',   key:'F', url:'https://cdn.pixabay.com/download/audio/2022/03/15/audio_0d4c3f2b8b.mp3?filename=lead-sound-6012.mp3' }
];

const padMap = new Map();
async function loadPad(p){
  const entry = { info:p, buffer:null, fallback:false };
  try{
    const r = await fetch(p.url, {mode:'cors'});
    if(!r.ok) throw new Error('http');
    const ab = await r.arrayBuffer();
    entry.buffer = await audioCtx.decodeAudioData(ab);
  }catch(e){ entry.fallback = true; console.warn('Pad fallback:', p.id, e); }
  padMap.set(p.id, entry);
}
Promise.all(pads.map(loadPad));

function padUI(){
  const board = document.getElementById('board');
  pads.forEach(p=>{
    const el = document.createElement('div');
    el.className = 'pad'; el.id = 'pad-'+p.id;
    el.innerHTML = `<div class="lab">${p.label}</div><div class="key">${p.key}</div>`;
    el.addEventListener('click', ()=>{ playPad(p.id); flash(el); });
    board.appendChild(el);
  });
}
padUI();

document.addEventListener('keydown', (ev)=>{
  const k = ev.key.toUpperCase();
  const p = pads.find(x=>x.key===k);
  if(p){ playPad(p.id); const el = document.getElementById('pad-'+p.id); flash(el); }
});

function playPad(id){
  if(audioCtx.state==='suspended') audioCtx.resume();
  const e = padMap.get(id);
  if(e && e.buffer){
    const src = audioCtx.createBufferSource(); src.buffer = e.buffer;
    const g = audioCtx.createGain(); g.gain.value = 1.0;
    src.connect(g); g.connect(analyser);
    try{ src.playbackRate.value = 0.95 + Math.random()*0.12; }catch(_){}
    src.start();
  } else {
    // graceful synth fallback
    const osc = audioCtx.createOscillator(); const g = audioCtx.createGain();
    osc.type='triangle'; osc.frequency.value = 140 + Math.random()*420;
    g.gain.setValueAtTime(0.0001, audioCtx.currentTime);
    g.gain.exponentialRampToValueAtTime(0.75, audioCtx.currentTime+0.01);
    g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime+0.45);
    osc.connect(g); g.connect(analyser); osc.start(); osc.stop(audioCtx.currentTime+0.5);
  }
}
function flash(el){
  el.style.transform='translateY(-6px) scale(1.02)';
  el.style.boxShadow='0 18px 40px rgba(0,0,0,.55)';
  setTimeout(()=>{ el.style.transform=''; el.style.boxShadow=''; }, 170);
}

/* =================== BACKGROUND LOOP =================== */
let bgSrc=null, bgOn=false;
const bgBtn = document.getElementById('bgToggle');
const bgUrl = 'https://cdn.pixabay.com/download/audio/2021/10/22/audio_9b7a1a7b3a.mp3?filename=chill-loop-11008.mp3';
async function startBG(){
  if(bgOn) return;
  try{
    const r = await fetch(bgUrl); const ab = await r.arrayBuffer();
    const buf = await audioCtx.decodeAudioData(ab);
    const src = audioCtx.createBufferSource(); src.buffer=buf; src.loop=true;
    const g = audioCtx.createGain(); g.gain.value=0.35;
    src.connect(g); g.connect(analyser); src.start();
    bgSrc=src; bgOn=true; bgBtn.textContent='Stop background';
  }catch(e){ console.warn('BG failed', e); }
}
function stopBG(){ if(bgSrc){ try{ bgSrc.stop(); }catch(_){ } bgSrc=null; } bgOn=false; bgBtn.textContent='Play background'; }
bgBtn.addEventListener('click', async ()=>{ if(audioCtx.state==='suspended') await audioCtx.resume(); bgOn?stopBG():startBG(); });

/* =================== STOP ALL =================== */
document.getElementById('stopAll').addEventListener('click', ()=>{
  stopBG();
  // Soft stop: momentarily disconnect/reconnect master to cut lingering tails
  try{ masterGain.disconnect(); masterGain.connect(audioCtx.destination); }catch(_){}
});

/* =================== SUBMIT =================== */
function scrollToSubmit(){ document.getElementById('submit').scrollIntoView({behavior:'smooth'}); }
document.getElementById('submitBtn').addEventListener('click', ()=>{
  if(audioCtx.state==='suspended') audioCtx.resume();
  // Replace href with your Fillout link (kept as '#')
});
</script>
</body>
</html>
